<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/home/home :: head"></head>
<body>
<div class="header" th:replace="/home/home :: header"></div>
<div class="main">
  <div class="container" style="margin-top: 200px">
    <div class="feature d-flex justify-content-between align-items-center mb-3">
      <div class="right">
        <form class="d-flex align-items-center" th:action="@{/admin/account}">
          <div class="form-outline">
            <input class="form-control" id="form1" name="search" placeholder="Search"
                   th:value="${searchValue}" type="search"/>
          </div>
          <button class="btn btn-secondary" type="submit">
            <i class="fas fa-search"></i>
          </button>
        </form>
      </div>
    </div>
    <table class="table">
      <thead class="table-dark">
      <th>STT</th>
      <th>Tên tài khoản</th>
      <th>Phân loại</th>
      <th>Ngày tạo</th>
      <th>Ngày sửa</th>
      <th class="text-center">Xóa</th>
      </thead>
      <tbody>
      <tr th:each="accountRole, index: ${listAccountRole}">
        <th th:text="${index.count + (10 * page)}"></th>
        <td th:text="${accountRole.account?.getUserName()}"></td>
        <td th:text="${accountRole.role?.getRoleName()}"></td>
        <td th:text="${#dates.format(accountRole.account?.initialDate.getCreateAt(), 'yyyy-MM-dd')}"></td>
        <td th:text="${#dates.format(accountRole.account?.initialDate.getUpdateAt(), 'yyyy-MM-dd')}"></td>
        <td class="text-center fs-4"><a data-bs-target="#exampleModal" data-bs-toggle="modal" th:attr="onclick=|passValueToModal('${accountRole.account?.id}','${accountRole.account?.userName}')|">
          <i class="fa-regular fa-trash-can text-danger"></i></a></td>
      </tr>
      </tbody>
    </table>
    <div aria-hidden="true" aria-labelledby="exampleModalLabel" class="modal fade" id="exampleModal" tabindex="-1">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5 fw-bold" id="exampleModalLabel">Xác nhận</h1>
            <button aria-label="Close" class="btn-close" data-bs-dismiss="modal" type="button"></button>
          </div>
          <div class="modal-body" id="modal-delete-body">
            ...
          </div>
          <div class="modal-footer">
            <button class="btn btn-secondary" data-bs-dismiss="modal" type="button">Hủy bỏ</button>
            <button class="btn btn-danger" id="delete-product-btn" type="button">Xóa ngay</button>
          </div>
        </div>
      </div>
    </div>
    <div class="text-center container" >
      <a class="page-item btn btn-outline-dark page-item"
         th:href="@{/admin/account(page = ${listAccountRole.number - 1})}"
         th:if="${listAccountRole.hasPrevious()}">
        <i class="ti-angle-left">Trước</i>
      </a>

      <a class="page-item number btn btn-outline-dark page-item m-1"
         th:classappend="${pageNumber == listAccountRole.number + 1} ? 'active' : ''"
         th:each="pageNumber : ${pageNumberList}"
         th:href="@{/admin/account(page = ${pageNumber - 1})}"
         th:text="${pageNumber}">
      </a>

      <a class="page-item btn btn-outline-dark page-item"
         th:href="@{/admin/product(page = ${listAccountRole.number + 1})}"
         th:if="${listAccountRole.hasNext()}">
        <i class="ti-angle-right">Sau</i>
      </a>
    </div>
  </div>
</div>
<div class="footer" th:replace="/home/home :: footer"></div>
<script>
  function passValueToModal(id, name) {
    document.getElementById("modal-delete-body").innerHTML = "Xác nhận xóa <span class='fw-bold'>" + name + "</span> ?";
    document.getElementById("delete-product-btn").onclick = () => {
      window.location = '/admin/account/delete/' + id;
    }
  }
</script>
</body>
</html>