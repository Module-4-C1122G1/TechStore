<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="/home/home :: head"></head>
<link rel="stylesheet" th:href="@{/css/createProduct.css}">
<body>
<div class="header" th:replace="/home/home :: header"></div>
<div class="main">
    <div class="main d-flex justify-content-center align-items-center mt-5">
        <div aria-atomic="true" aria-live="assertive" class="toast show" role="alert" th:if="${msgSuccess != null}">
            <div class="toast-header bg-warning">
                <strong class="me-auto">Thông báo</strong>
                <small>1 second ago</small>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="toast" type="button"></button>
            </div>
            <div class="toast-body" th:text="${msgSuccess}">
            </div>
        </div>
        <div aria-atomic="true" aria-live="assertive" class="toast show" role="alert" th:if="${msgError != null}">
            <div class="toast-header bg-danger">
                <strong class="me-auto">Thông báo</strong>
                <small>1 second ago</small>
                <button aria-label="Close" class="btn-close" data-bs-dismiss="toast" type="button"></button>
            </div>
            <div class="toast-body" th:text="${msgError}">
            </div>
        </div>

        <div class="container" style="margin-top: 200px">
            <div class="feature d-flex justify-content-between align-items-center mb-3">
                <div class="left">
                    <a href="/admin/employee/create" class="btn btn-secondary">Thêm Mới Nhân Viên <i
                            class="fa-solid fa-plus"></i></a>
                </div>
                <div class="right">
                    <form class="d-flex align-items-center" th:action="@{/admin/employee}">
                        <div class="form-outline">
                            <input class="form-control" id="form1" name="search" placeholder="Tìm kiếm theo tên..."
                                   th:value="${name}" type="search"/>
                        </div>
                        <button class="btn btn-secondary" type="submit">
                            <i class="fas fa-search"></i>
                        </button>
                    </form>
                </div>
            </div>
            <table class="table mt-5">
                <thead class="table-dark">
                <tr>
                    <th>STT</th>
                    <th>Tên Nhân Viên</th>
                    <th>Số Điện Thoại</th>
                    <th>Ngày Sinh</th>
                    <th>Địa Chỉ</th>
                    <th>Chức Vụ</th>
                    <th>Phòng Ban</th>
                    <th>Giới Tính</th>
                    <th class="text-center">Chi Tiết</th>
                    <th class="text-center">Chỉnh Sửa</th>
                    <th class="text-center">Xóa</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="employee , iterStat : ${employeeList}">
                    <td th:text="*{iterStat.count}"></td>
                    <td th:text="*{employee.nameEmployee}"></td>
                    <td th:text="*{employee.phoneNumber}"></td>
                    <td th:text="*{#dates.format(employee.dateOfBirth, 'dd-MM-yyyy')}"></td>
                    <td th:text="*{employee.address}"></td>
                    <td th:text="*{employee.position?.namePosition}"></td>
                    <td th:text="*{employee.department?.nameDepartment}"></td>
                    <td th:text="*{employee.gender?.nameGender}"></td>
                    <td class="text-center fs-4"><a th:href="@{/admin/employee/detail?id=__*{employee.id}__}"><i
                            class="fa-regular fa-file-lines text-secondary"></i></a></td>
                    <td class="text-center fs-4"><a th:href="@{/admin/employee/edit?id=__*{employee.id}__}"><i
                            class="fa-regular fa-pen-to-square text-warning"></i></a></td>
                    <td class="text-center fs-4">
                        <button style="border: none;background: none" type="button" data-toggle="modal"
                                data-target="#modelId"
                                th:attr="onclick=|infoDelete('${employee.id}', '${employee.nameEmployee}')|">
                            <i class="fa-regular fa-trash-can text-danger"></i>
                        </button>
                    </td>
                </tr>
                </tbody>
            </table>
            <h2 class="text-center" style="color: red" th:if="${list == 0}">Không tìm thấy nhân viên nào có tên là <span
                    style="color: red" th:text="${name}"></span></h2>

            <!--    Modal Xóa-->
            <div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
                 aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title"> Xóa Nhân Viên </h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <form action="/admin/employee/delete">
                            <div class="modal-body">
                                <input type="hidden" name="deleteId" id="deleteId">
                                <span>Bạn Có Chắc Chắn Xóa Nhân Viên </span><span style="color: red"
                                                                                  id="deleteName"></span>
                                Không ?
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Huỷ</button>
                                <button type="submit" class="btn btn-danger">Xoá</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <script>
                function infoDelete(id, name) {
                    document.getElementById("deleteId").value = id;
                    document.getElementById("deleteName").innerText = name;
                }
            </script>
            <!--Phân trang-->
            <div class="text-center container">
                <a class="page-item btn btn-outline-dark page-item" th:if="${employeeList.hasPrevious()}"
                   th:href="@{/admin/employee(page = ${employeeList.number - 1})}">
                    <i class="ti-angle-left">Trước</i>
                </a>

                <a class="page-item number btn btn-outline-dark page-item m-1"
                   th:classappend="${pageNumber == employeeList.number + 1} ? 'active' : ''"
                   th:each="pageNumber : ${pageNumberList}"
                   th:href="@{/admin/employee(page = ${pageNumber - 1})}"
                   th:text="${pageNumber}">
                </a>

                <a class="page-item btn btn-outline-dark page-item" th:if="${employeeList.hasNext()}"
                   th:href="@{/admin/employee(page = ${employeeList.number + 1})}">
                    <i class="ti-angle-right">Sau</i>
                </a>
            </div>
        </div>
    </div>
</div>
<div class="site-footer" th:replace="/home/home :: footer"></div>
<script>
    setTimeout(() => {
        let toast = document.getElementsByClassName("toast")[0];
        toast.style.transform = "translate(" + 0 + "," + 100 + "%)";
        toast.style.opacity = 0;
        toast.style.transition = 0.5 + "s transform, " + 1 + "s opacity";
    }, 2500);
</script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>
</html>